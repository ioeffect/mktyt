# Побитовые операции  

Так как программирование под МК заключается в постоянном низкоуровневом управлении памятью, что под собой подразумевает чтение/запись в регистры, в отдельные биты, нам необходимо владеть средствами для подобных манипуляций. А также познакомиться с тройкой трюков.

## Побитовые сдвиги

Начнём наше знакомство с бинарного оператора `<<` --- побитового сдвига влево. Его синтаксис следующий: `A << N`. Значение `A` двигается на `N` бит влево с заполнением освободишься битов лог. нулями, то есть сдваиваемые за разрядную сетку биты теряются.  

Простой пример:
```c
1 << 3 
	=> 0000 0001 << 3 
			   ^
	=> 0000 0010 << 2
			  ^
	=> 0000 0100 << 1
		     ^
	=> 0000 1000 << 0
			^
	=> 0000 1000 
```
> При работе с регистрами нам надо часто записать значение в определённый бит, там как раз мы и применяем операцию побитового сдвига. Например, мы хотим установить режим работы лапки PB2 на вывод(output, что соответствен лог. '1'), тогда для этого мы напишем следующее `DDRB = 1 << PB2`.

Также как существует побитовый сдвиг влево, существует побитовый сдвиг влево -- `>>`. Синтаксис: `A >> N`. Принцип работы тот же, что и у `<<`.
```c
0b00001000 >> 2
	=> 0000 1000 >> 2
			^
	=> 0000 0100 >> 1
			 ^
	=> 0000 0010 >> 0
			  ^
	=> 0000 0010
``` 

## Побитовое "или"

Побитовое "или" --- это дизъюнкция(логическое "или") применённая к парам бит двух операндов. Синтаксис `A | B`. 

Пример:
```c
0b01000100 | 0b00000100
	=> 
		0100 0100  
		0000 0100
		---------
		0100 0100
		
	=> 0100 0100
```

## Побитовое "и"

Побитовое "и" --- это конъюнкция(логическое "и") применённая к парам бит двух операндов. Синтаксис `A & B`. 

Пример:
```c
0b01000100 & 0b00000100
	=> 
		0100 0100  
		0000 0100
		---------
		0000 0100
		
	=> 0000 0100
```

> Побитовые "и" и "или" часто выручают при работе с регистрами, когда нам надо изменить значение какого-либо бита, не сбрасывая другие биты.  
> Например:
> ```c
> PORTB = 0010 000
> PORTB |= 1 << PB0
> // PORTB = 0010 001
> ```

## Инверсия

Инверсия --- это логическое отрицание, применённое к битам операнда.
Синтаксис: `~A`. Пример:
```c
~0b00000100 => 0b11111011
```

> Зачастую применяется вкупе с побитовым сдвигом для записи нуля
> в разряд. Например: `~(1 << PB2)`.

## XOR

```c
// PORTB =  0b00000100
PORTB ^= (1 << PB0) | (1 << PB2);
// PORTB =  0b00000001
```

> Устанавливает противоположное состояние, если использовать связку xor + `(1 << n)`.

